{% extends "base.html" %}  
{% block title %}{{ ssn and ('Edit ' ~ ssn) or 'New Employee' }}{% endblock %}
{% block content %}
<h1>{{ ssn and ('Edit ' ~ ssn) or 'New Employee' }}</h1>

<form method="post" class="stack" style="display:grid;gap:10px;grid-template-columns:repeat(6,minmax(140px,1fr));align-items:center;">
  {% if not ssn %}
    <label>SSN
      <input name="ssn" required pattern="\d{1,9}" title="1–9 digits">
    </label>
    <label>First Name
      <input name="fname" required>
    </label>
    <label>M.I.
      <input name="minit" maxlength="1" placeholder="-" title="One letter (optional)">
    </label>
    <label>Last Name
      <input name="lname" required>
    </label>
    <label>Sex
      <select name="sex" required>
        <option value="">--</option>
        <option value="F">F</option>
        <option value="M">M</option>
      </select>
    </label>
    <label>Supervisor SSN
      <input name="super_ssn" placeholder="optional">
    </label>
  {% endif %}

  <label>Address
    <input name="address" required value="{{ row and row.address }}">
  </label>
  <label>Salary
    <input name="salary" type="number" step="0.01" min="0" required value="{{ row and row.salary }}">
  </label>
  <label>Dept #
    <input name="dno" type="number" min="1" required value="{{ row and row.dno }}">
  </label>

  {# Optional: allow editing supervisor/sex/minit too — uncomment if you want them on Edit
  <label>Supervisor SSN
    <input name="super_ssn" value="{{ row and row.super_ssn }}">
  </label>
  <label>Sex
    <select name="sex">
      <option value="" {% if not row or not row.sex %}selected{% endif %}>--</option>
      <option value="F" {% if row and row.sex == 'F' %}selected{% endif %}>F</option>
      <option value="M" {% if row and row.sex == 'M' %}selected{% endif %}>M</option>
    </select>
  </label>
  <label>M.I.
    <input name="minit" maxlength="1" value="{{ row and row.minit }}">
  </label>
  #}

  <div style="grid-column:1/-1;margin-top:6px;">
    <button type="submit">{{ ssn and 'Save' or 'Create' }}</button>
    <a href="{{ url_for('employees') }}">Cancel</a>
  </div>
</form>
{% endblock %}
